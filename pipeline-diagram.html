<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipeline Infrastructure Diagram</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; }
        .pipeline { display: flex; align-items: center; justify-content: space-between; margin: 30px 0; }
        .stage { background: #f0f8ff; border: 2px solid #4a90e2; border-radius: 10px; padding: 20px; margin: 0 10px; text-align: center; min-width: 150px; }
        .arrow { font-size: 24px; color: #4a90e2; }
        .github { background: #f6f8fa; border-color: #24292e; }
        .codepipeline { background: #fff3cd; border-color: #ffc107; }
        .codebuild { background: #d4edda; border-color: #28a745; }
        .terraform { background: #e7f3ff; border-color: #007bff; }
        .aws { background: #fff2e6; border-color: #fd7e14; }
        .infrastructure { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0; }
        .resource { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 15px; text-align: center; }
        .s3 { background: #e8f5e8; border-color: #28a745; }
        .iam { background: #fff3cd; border-color: #ffc107; }
    </style>
</head>
<body>
    <h1>ğŸ—ï¸ Pipeline Infrastructure Diagram</h1>
    
    <h2>Pipeline Flow</h2>
    <div class="pipeline">
        <div class="stage github">
            <h3>ğŸ“ GitHub</h3>
            <p>Source Repository</p>
            <small>Terraform Code<br>Buildspec.yml</small>
        </div>
        
        <div class="arrow">â†’</div>
        
        <div class="stage codepipeline">
            <h3>ğŸ”„ CodePipeline</h3>
            <p>Orchestration</p>
            <small>Source Stage<br>Deploy Stage</small>
        </div>
        
        <div class="arrow">â†’</div>
        
        <div class="stage codebuild">
            <h3>ğŸ”¨ CodeBuild</h3>
            <p>Build & Deploy</p>
            <small>Terraform Init<br>Plan & Apply</small>
        </div>
        
        <div class="arrow">â†’</div>
        
        <div class="stage aws">
            <h3>â˜ï¸ AWS Resources</h3>
            <p>Infrastructure</p>
            <small>EC2, Security Groups<br>Parameter Store, Secrets</small>
        </div>
    </div>

    <h2>Supporting Infrastructure</h2>
    <div class="infrastructure">
        <div class="resource s3">
            <h4>ğŸ“¦ S3 Buckets</h4>
            <ul style="text-align: left; font-size: 12px;">
                <li>Pipeline Artifacts</li>
                <li>Terraform State</li>
            </ul>
        </div>
        
        <div class="resource iam">
            <h4>ğŸ” IAM Roles</h4>
            <ul style="text-align: left; font-size: 12px;">
                <li>CodePipeline Role</li>
                <li>CodeBuild Role</li>
            </ul>
        </div>
        
        <div class="resource">
            <h4>âš™ï¸ CodeBuild Project</h4>
            <ul style="text-align: left; font-size: 12px;">
                <li>Standard 5.0 Image</li>
                <li>Small Compute</li>
            </ul>
        </div>
    </div>

    <h2>Stage Progression</h2>
    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <p><strong>demo-config.txt</strong> controls which stage deploys:</p>
        <ul>
            <li><code>stage1-basic-ec2</code> â†’ Hardcoded EC2 instance</li>
            <li><code>stage2-parameter-store</code> â†’ Parameter Store integration</li>
            <li><code>stage3-secrets-manager</code> â†’ Secrets Manager integration</li>
            <li><code>stage4-manual-approval</code> â†’ Manual approval workflow</li>
        </ul>
    </div>
</body>
</html>